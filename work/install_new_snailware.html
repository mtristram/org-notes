<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Install notes for SN@ilWare software</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Xavier Garrido" />
<meta  name="description" content="Quick notes on how to install new SN@ilWare software on different machines"
 />
<link rel="stylesheet" href="../css/styles.css" />
               <link rel="stylesheet" href="../css/org-pygments.css" />
               <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script><script type="text/javascript">
  function randomLinkColor() {
      var colors = ['#f1c40f','#e74c3c','#3399cc','#e67e22','#67ad00','#8e44ad','#1abc9c','#003399'];
      var random_color = colors[Math.floor(Math.random() * colors.length)];
      var elements = document.querySelectorAll('a');
      [].slice.call(elements).forEach(function(elem) {
          //elem.style.color = random_color;
      });
  }
  function displayTOC() {
      var ttoc = document.getElementById("text-table-of-contents");
      if (ttoc) {
          var maincontent = '<a class="button"><i class="fa fa-list"></i></a>'
          maincontent += "<div>" + ttoc.innerHTML + "</div>";
          document.getElementById("toc").innerHTML = maincontent;
      } else {
          document.getElementById("toc").style.display = "none";
          document.getElementById("preamble").style.top = "10px";
      }
     }
  </script>
</head>
<body onload="randomLinkColor();displayTOC();"><div id="toc"></div>
<div id="preamble" class="status">
<a href="../index.html"><i class="fa fa-home"></i></a><br/> <a href="https://github.com/xgarrido/org-notes"><i class="fa fa-github"></i></a><br/> 
</div>
<div id="content">
<h1 class="title">Install notes for SN@ilWare software</h1>
<div id="table-of-contents">
<h2></h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline15">1. Install @ LAL</a>
<ul>
<li><a href="#orgheadline4">1.1. Preamble</a></li>
<li><a href="#orgheadline8">1.2. Cadfael</a></li>
<li><a href="#orgheadline11">1.3. Bayeux</a></li>
<li><a href="#orgheadline14">1.4. Falaise</a></li>
</ul>
</li>
<li><a href="#orgheadline32">2. Install @ CC</a>
<ul>
<li><a href="#orgheadline19">2.1. Preamble</a></li>
<li><a href="#orgheadline23">2.2. Cadfael</a></li>
<li><a href="#orgheadline27">2.3. Bayeux</a></li>
<li><a href="#orgheadline31">2.4. Falaise</a></li>
</ul>
</li>
<li><a href="#orgheadline46">3. Install @ laptop</a>
<ul>
<li><a href="#orgheadline33">3.1. Machine configuration</a></li>
<li><a href="#orgheadline45">3.2. With <code>g++ (GCC) 4.8.2</code></a></li>
</ul>
</li>
<li><a href="#orgheadline60">4. Install @ pc-server</a>
<ul>
<li><a href="#orgheadline49">4.1. Preamble</a></li>
<li><a href="#orgheadline54">4.2. Cadfael</a></li>
<li><a href="#orgheadline59">4.3. Bayeux</a></li>
</ul>
</li>
<li><a href="#orgheadline81">5. Install @ VMWare</a>
<ul>
<li><a href="#orgheadline65">5.1. Preamble</a></li>
<li><a href="#orgheadline70">5.2. Cadfael</a></li>
<li><a href="#orgheadline75">5.3. Bayeux</a></li>
<li><a href="#orgheadline79">5.4. Falaise</a></li>
<li><a href="#orgheadline80">5.5. Final tests</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-2">
<h2 id="orgheadline15"><span class="section-number-2">1</span> Install @ LAL</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">1.1</span> Preamble</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-orgheadline1" class="outline-4">
<h4 id="orgheadline1"><span class="section-number-4">1.1.1</span> Configuration of <code>cmake</code>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="deprecated">deprecated</span></span></h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
First you should specify an alias to the latest version of <code>cmake</code> by executing
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">alias</span> <span class="org-variable-name">cmake</span>=cmake28
</pre>
</div>
<p>
You will get version 2.8.9 of <code>cmake</code>.
</p>
</div>
</div>
<div id="outline-container-orgheadline2" class="outline-4">
<h4 id="orgheadline2"><span class="section-number-4">1.1.2</span> Configuration of installation directory</h4>
<div class="outline-text-4" id="text-1-1-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">SW_WORK_DIR</span>=/exp/nemo/garrido/tmp
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-4">
<h4 id="orgheadline3"><span class="section-number-4">1.1.3</span> Machine configuration</h4>
<div class="outline-text-4" id="text-1-1-3">
<div class="org-src-container">

<pre class="src src-sh">uname -a
Linux nemo3.lal.in2p3.fr 2.6.32-220.13.1.el6.x86_64 <span class="org-comment-delimiter">#</span><span class="org-comment">1 SMP Tue Apr 17 15:16:22 CDT 2012 x86_64 x86_64 x86_64 GNU/Linux</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sh">gcc --version
<span class="org-function-name">gcc</span> (GCC) 4.7.2 20121015 (Red Hat 4.7.2-5)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">1.2</span> Cadfael</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5"><span class="section-number-4">1.2.1</span> Checking out</h4>
<div class="outline-text-4" id="text-1-2-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Cadfael/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-4">
<h4 id="orgheadline6"><span class="section-number-4">1.2.2</span> Configuration</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
To setup <code>Cadfael</code>, first create the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/build
</pre>
</div>
<p>
Then simply do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                     <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/install <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_VERBOSE_BUILD=ON                            <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_STEP_TARGETS=ON                             <span class="org-sh-escaped-newline">\</span>
    -Dport/patchelf=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/gsl=ON                                         <span class="org-sh-escaped-newline">\</span>
    -Dport/clhep=ON                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/boost=ON                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/boost+<span class="org-variable-name">regex</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/camp=ON                                        <span class="org-sh-escaped-newline">\</span>
    -Dport/xerces-c=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4=ON                                      <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">gdml</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">x11</span>=ON                                  <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">data</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/root=ON                                        <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">x11</span>=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">asimage</span>=ON                                <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">mathmore</span>=ON                               <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">opengl</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/trunk/
</pre>
</div>
<p>
then execute the <code>make</code> command
</p>
<div class="org-src-container">

<pre class="src src-sh">make
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-4">
<h4 id="orgheadline7"><span class="section-number-4">1.2.3</span> Ports status <code>[8/8]</code></h4>
<div class="outline-text-4" id="text-1-2-3">
<ul class="org-ul">
<li class="on"> patchelf</li>
<li class="on"> GSL</li>
<li class="on"> CLHEP</li>
<li class="on"> boost</li>
<li class="on"> camp</li>
<li class="on"> xerces-c</li>
<li class="on"> Geant4
<ul class="org-ul">
<li class="on"> <code>-Dport/geant4+gdml</code> will install Xerces-C</li>
<li class="on"> <code>-Dport/geant4+data</code></li>
</ul></li>
<li class="on"> ROOT
<ul class="org-ul">
<li class="on"> <code>-Dport/root+mathmore</code></li>
<li class="on"> <code>-Dport/root+opengl</code></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">1.3</span> Bayeux</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-orgheadline9" class="outline-4">
<h4 id="orgheadline9"><span class="section-number-4">1.3.1</span> Configuration</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
To setup <code>Bayeux</code>, execute the following code
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                    <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/install <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_PREFIX_PATH=${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/install   <span class="org-sh-escaped-newline">\</span>
    -DBayeux_ENABLE_TESTING=ON                           <span class="org-sh-escaped-newline">\</span>
    -DBayeux_WITH_GEANT4=ON                              <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/trunk/
</pre>
</div>

<p>
To run the compilation process on several CPU cores do
</p>
<div class="org-src-container">

<pre class="src src-sh">make -j8 install
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10"><span class="section-number-4">1.3.2</span> Test programs <code>[10/10]</code></h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
Adding option <code>-DBayeux_ENABLE_TESTING=ON</code> to the <code>cmake</code> command will enable
the compilation of test programs. Then doing <code>make test</code> will launch each of
the <b>237 test programs</b> and it will eventually shows some broken tests.
</p>

<ul class="org-ul">
<li class="on"> datatools</li>
<li class="on"> brio</li>
<li class="on"> cuts</li>
<li class="on"> genbb_help</li>
<li class="on"> geomtools</li>
<li class="on"> genvtx</li>
<li class="on"> mygsl</li>
<li class="on"> materials</li>
<li class="on"> dpp</li>
<li class="on"> mctools</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">1.4</span> Falaise</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-orgheadline12" class="outline-4">
<h4 id="orgheadline12"><span class="section-number-4">1.4.1</span> Configuration</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
To setup <code>Falaise</code> with an already version of <code>Bayeux</code> installed, do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                                                  <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/install                              <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_PREFIX_PATH=<span class="org-string">"${SW_WORK_DIR}/Cadfael/install;${SW_WORK_DIR}/Bayeux/install"</span> <span class="org-sh-escaped-newline">\</span>
    -DFalaise_ENABLE_TESTING=ON                                                        <span class="org-sh-escaped-newline">\</span>
    -DFalaise_BUILD_DOCS=ON                                                            <span class="org-sh-escaped-newline">\</span>
    -DFalaise_USE_SYSTEM_BAYEUX=ON                                                     <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/trunk
</pre>
</div>

<p>
To run the compilation process on several CPU cores do
</p>
<div class="org-src-container">

<pre class="src src-sh">make -j8 install
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline13" class="outline-4">
<h4 id="orgheadline13"><span class="section-number-4">1.4.2</span> Basic tests</h4>
<div class="outline-text-4" id="text-1-4-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/build
./BuildProducts/bin/flsimulate -n 10 -o /tmp/${<span class="org-variable-name">USER</span>}/snemo_tc_muons_roof.xml
./BuildProducts/bin/flreconstruct -i /tmp/${<span class="org-variable-name">USER</span>}/snemo_tc_muons_roof.xml
</pre>
</div>

<p>
Tests successfully passed.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline32" class="outline-2">
<h2 id="orgheadline32"><span class="section-number-2">2</span> Install @ CC</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">2.1</span> Preamble</h3>
<div class="outline-text-3" id="text-2-1">
</div><div id="outline-container-orgheadline16" class="outline-4">
<h4 id="orgheadline16"><span class="section-number-4">2.1.1</span> Configuration of <code>cmake</code></h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
First you should use a more decent version of <code>cmake</code> by doing
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">source</span> $<span class="org-variable-name">THRONG_DIR</span>/sw/config/SL6.4/nemo_basic_sw_setup-1.0.bash
do_nemo_basics_sw_setup_1
</pre>
</div>
<p>
You will get version 2.8.10.2 of <code>cmake</code>.
</p>
</div>
</div>
<div id="outline-container-orgheadline17" class="outline-4">
<h4 id="orgheadline17"><span class="section-number-4">2.1.2</span> Configuration of installation directory</h4>
<div class="outline-text-4" id="text-2-1-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">SW_WORK_DIR</span>=/sps/nemo/scratch/garrido/tmp
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline18" class="outline-4">
<h4 id="orgheadline18"><span class="section-number-4">2.1.3</span> Machine configuration</h4>
<div class="outline-text-4" id="text-2-1-3">
<div class="org-src-container">

<pre class="src src-sh">uname -a
Linux ccage031 2.6.32-358.14.1.el6.x86_64 <span class="org-comment-delimiter">#</span><span class="org-comment">1 SMP Tue Jul 16 14:24:33 CDT 2013 x86_64 x86_64 x86_64 GNU/Linux</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sh">gcc --version | head -1
<span class="org-function-name">gcc</span> (GCC) 4.4.7 20120313 (Red Hat 4.4.7-3)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline23" class="outline-3">
<h3 id="orgheadline23"><span class="section-number-3">2.2</span> Cadfael</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-orgheadline20" class="outline-4">
<h4 id="orgheadline20"><span class="section-number-4">2.2.1</span> Checking out</h4>
<div class="outline-text-4" id="text-2-2-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Cadfael/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline21" class="outline-4">
<h4 id="orgheadline21"><span class="section-number-4">2.2.2</span> Configuration</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
To setup <code>Cadfael</code>, first create the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir -p ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/build
</pre>
</div>
<p>
Then simply do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                     <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/install <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_VERBOSE_BUILD=ON                            <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_STEP_TARGETS=ON                             <span class="org-sh-escaped-newline">\</span>
    -Dport/patchelf=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/gsl=ON                                         <span class="org-sh-escaped-newline">\</span>
    -Dport/clhep=ON                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/boost=ON                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/boost+<span class="org-variable-name">regex</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/camp=ON                                        <span class="org-sh-escaped-newline">\</span>
    -Dport/xerces-c=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4=ON                                      <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">gdml</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">x11</span>=ON                                  <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">data</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/root=ON                                        <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">x11</span>=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">asimage</span>=ON                                <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">mathmore</span>=ON                               <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">opengl</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/trunk/
</pre>
</div>
<p>
then execute the <code>make</code> command
</p>
<div class="org-src-container">

<pre class="src src-sh">make
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline22" class="outline-4">
<h4 id="orgheadline22"><span class="section-number-4">2.2.3</span> Ports status <code>[8/8]</code></h4>
<div class="outline-text-4" id="text-2-2-3">
<ul class="org-ul">
<li class="on"> patchelf</li>
<li class="on"> GSL</li>
<li class="on"> CLHEP</li>
<li class="on"> boost</li>
<li class="on"> camp</li>
<li class="on"> xerces-c</li>
<li class="on"> Geant4
<ul class="org-ul">
<li class="on"> <code>-Dport/geant4+gdml</code> will install Xerces-C</li>
<li class="on"> <code>-Dport/geant4+data</code></li>
</ul></li>
<li class="on"> ROOT
<ul class="org-ul">
<li class="on"> <code>-Dport/root+mathmore</code></li>
<li class="on"> <code>-Dport/root+opengl</code></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline27" class="outline-3">
<h3 id="orgheadline27"><span class="section-number-3">2.3</span> Bayeux</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-orgheadline24" class="outline-4">
<h4 id="orgheadline24"><span class="section-number-4">2.3.1</span> Checking out</h4>
<div class="outline-text-4" id="text-2-3-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Bayeux/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline25" class="outline-4">
<h4 id="orgheadline25"><span class="section-number-4">2.3.2</span> Configuration</h4>
<div class="outline-text-4" id="text-2-3-2">
<p>
To setup <code>Bayeux</code>, first create the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir -p ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/build
</pre>
</div>
<p>
Then simply do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                    <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/install <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_PREFIX_PATH=${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/install   <span class="org-sh-escaped-newline">\</span>
    -DBayeux_ENABLE_TESTING=ON                           <span class="org-sh-escaped-newline">\</span>
    -DBayeux_WITH_GEANT4=ON                              <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/trunk/
</pre>
</div>

<p>
To run the compilation process on several CPU cores do
</p>
<div class="org-src-container">

<pre class="src src-sh">make -j6 install
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">2.3.3</span> Test programs <code>[10/10]</code></h4>
<div class="outline-text-4" id="text-2-3-3">
<p>
Adding option <code>-DBayeux_ENABLE_TESTING=ON</code> to the <code>cmake</code> command will enable
the compilation of test programs. Then doing <code>make test</code> will launch each of
the <b>238 test programs</b> and it will eventually shows some broken tests.
</p>

<ul class="org-ul">
<li class="on"> datatools</li>
<li class="on"> brio</li>
<li class="on"> cuts</li>
<li class="on"> genbb_help</li>
<li class="on"> geomtools</li>
<li class="on"> genvtx</li>
<li class="on"> mygsl</li>
<li class="on"> materials</li>
<li class="on"> dpp</li>
<li class="on"> mctools</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgheadline31" class="outline-3">
<h3 id="orgheadline31"><span class="section-number-3">2.4</span> Falaise</h3>
<div class="outline-text-3" id="text-2-4">
</div><div id="outline-container-orgheadline28" class="outline-4">
<h4 id="orgheadline28"><span class="section-number-4">2.4.1</span> Checking out</h4>
<div class="outline-text-4" id="text-2-4-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Falaise/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline29" class="outline-4">
<h4 id="orgheadline29"><span class="section-number-4">2.4.2</span> Configuration</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
To setup <code>Falaise</code> with an already version of <code>Bayeux</code> installed, first create
the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir -p ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/build
</pre>
</div>
<p>
Then configure <code>Falaise</code>
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                                                  <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/install                              <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_PREFIX_PATH=<span class="org-string">"${SW_WORK_DIR}/Cadfael/install;${SW_WORK_DIR}/Bayeux/install"</span> <span class="org-sh-escaped-newline">\</span>
    -DFalaise_ENABLE_TESTING=ON                                                        <span class="org-sh-escaped-newline">\</span>
    -DFalaise_BUILD_DOCS=OFF                                                           <span class="org-sh-escaped-newline">\</span>
    -DFalaise_USE_SYSTEM_BAYEUX=ON                                                     <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/trunk
</pre>
</div>

<p>
<b>Remark:</b> <code>doxygen</code> version @ Lyon is 1.6 which does not fulfill requirements
for building <code>Falaise</code> documentation.
</p>

<p>
To run the compilation process on several CPU cores do
</p>
<div class="org-src-container">

<pre class="src src-sh">make -j6 install
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline30" class="outline-4">
<h4 id="orgheadline30"><span class="section-number-4">2.4.3</span> Basic tests</h4>
<div class="outline-text-4" id="text-2-4-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/build
./BuildProducts/bin/flsimulate -n 10 -o /tmp/${<span class="org-variable-name">USER</span>}/snemo_tc_muons_roof.xml
./BuildProducts/bin/flreconstruct -i /tmp/${<span class="org-variable-name">USER</span>}/snemo_tc_muons_roof.xml
</pre>
</div>

<p>
Tests successfully passed.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline46" class="outline-2">
<h2 id="orgheadline46"><span class="section-number-2">3</span> Install @ laptop</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-orgheadline33" class="outline-3">
<h3 id="orgheadline33"><span class="section-number-3">3.1</span> Machine configuration</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">

<pre class="src src-sh">uname -a
Linux garrido-laptop 3.11.4-1-ARCH <span class="org-comment-delimiter">#</span><span class="org-comment">1 SMP PREEMPT Sat Oct 5 21:22:51 CEST 2013 x86_64 GNU/Linux</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sh">cmake --version
cmake version 2.8.12
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline45" class="outline-3">
<h3 id="orgheadline45"><span class="section-number-3">3.2</span> With <code>g++ (GCC) 4.8.2</code></h3>
<div class="outline-text-3" id="text-3-2">
</div><div id="outline-container-orgheadline39" class="outline-4">
<h4 id="orgheadline39"><span class="section-number-4">3.2.1</span> Cadfael</h4>
<div class="outline-text-4" id="text-3-2-1">
</div><ul class="org-ul"><li><a id="orgheadline34"></a>Checking out<br  /><div class="outline-text-5" id="text-orgheadline34">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Cadfael/trunk <span class="org-sh-escaped-newline">\</span>
    ~/Workdir/NEMO/supernemo/snware_test/cadfael/trunk
</pre>
</div>
</div></li>
<li><a id="orgheadline35"></a>Configuration<br  /><div class="outline-text-5" id="text-orgheadline35">
<p>
To setup <code>Cadfael</code> simply do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                                           <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=~/Workdir/NEMO/supernemo/new_snware/cadfael/install  <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_VERBOSE_BUILD=ON                                                  <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_STEP_TARGETS=ON                                                   <span class="org-sh-escaped-newline">\</span>
    -Dport/patchelf=ON                                                          <span class="org-sh-escaped-newline">\</span>
    -Dport/gsl=ON                                                               <span class="org-sh-escaped-newline">\</span>
    -Dport/clhep=ON                                                             <span class="org-sh-escaped-newline">\</span>
    -Dport/boost=ON                                                             <span class="org-sh-escaped-newline">\</span>
    -Dport/boost+<span class="org-variable-name">regex</span>=ON                                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/camp=ON                                                              <span class="org-sh-escaped-newline">\</span>
    -Dport/xerces-c=ON                                                          <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4=ON                                                            <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">gdml</span>=ON                                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">x11</span>=ON                                                        <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">data</span>=ON                                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/root=ON                                                              <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">x11</span>=ON                                                          <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">asimage</span>=ON                                                      <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">mathmore</span>=ON                                                     <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">opengl</span>=ON                                                       <span class="org-sh-escaped-newline">\</span>
    ~/Workdir/NEMO/supernemo/new_snware/cadfael/trunk
</pre>
</div>
<p>
then execute the <code>make</code> command
</p>
<div class="org-src-container">

<pre class="src src-sh">make
</pre>
</div>
</div></li>
<li><a id="orgheadline37"></a>Ports status <code>[7/8]</code><br  /><div class="outline-text-5" id="text-orgheadline37">
<ul class="org-ul">
<li class="on"> patchelf</li>
<li class="on"> GSL</li>
<li class="on"> CLHEP</li>
<li class="on"> boost (see <a href="#orgheadline36">Boost test error</a> and fix)</li>
<li class="on"> camp</li>
<li class="trans"> xerces-c</li>
<li class="on"> Geant4</li>
<li class="on"> ROOT</li>
</ul>
</div></li>

<li><a id="orgheadline38"></a>Xerces-C test error<br  /><div class="outline-text-5" id="text-orgheadline38">
<div class="org-src-container">

<pre class="src src-sh">Making check<span class="org-keyword"> in</span> samples
1099,1103c1099
&lt; String expression test failed at line 5735
&lt; String expression test failed at line 5746
&lt; String expression test failed at line 5749
&lt; String expression test failed at line 5752
&lt; Test Failed
---
&gt; Test Run Successfully
make[3]: *** [check] Erreur 1
make[2]: *** [ports/xerces-c/xerces-c-prefix/src/xerces-c-stamp/xerces-c-test] Erreur 2
make[1]: *** [ports/xerces-c/CMakeFiles/xerces-c.dir/all] Erreur 2
make: *** [all] Erreur 2
</pre>
</div>

<p>
The problem comes from <code>DTest</code> under <code>&lt;xerces-c src
dir&gt;/tests/src/DOM/DOMTest/DTest.cpp</code> line 5680 where a preprocessor macro
checks if 2 strings are "Xerces-C" equal. It fails at different place as <code>diff</code>
exhibits. It is not clear what is going on. <b>Solution for the time being is to
disable these tests and see if it may propagate to some other ports</b>
</p>
</div></li>
<li><a id="orgheadline36"></a>Boost test error<br  /><div class="outline-text-5" id="text-orgheadline36">
<p>
A fix will be to patch the <code>cstdint.hpp</code> file following this commit
<a href="https://svn.boost.org/trac/boost/changeset/84950">https://svn.boost.org/trac/boost/changeset/84950</a>
</p>

<ul class="org-ul">
<li>check in boost 1.55.0 and <b>fix already implemented</b></li>
<li>but Cadfael uses boost 1.53.0 for which <b>fix is not implemented ! &rarr;
  thiw works</b></li>
</ul>

<p>
<del>Fixed since Cadfael ahs moved to Boost 1.55.0</del>
</p>
</div></li></ul>
</div>
<div id="outline-container-orgheadline43" class="outline-4">
<h4 id="orgheadline43"><span class="section-number-4">3.2.2</span> Bayeux</h4>
<div class="outline-text-4" id="text-3-2-2">
</div><ul class="org-ul"><li><a id="orgheadline40"></a>Checking out<br  /><div class="outline-text-5" id="text-orgheadline40">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Bayeux/trunk <span class="org-sh-escaped-newline">\</span>
    ~/Workdir/NEMO/supernemo/new_snware/bayeux/repo
</pre>
</div>
</div></li>
<li><a id="orgheadline41"></a>Configuration<br  /><div class="outline-text-5" id="text-orgheadline41">
<p>
To setup <code>Bayeux</code> execute the following code
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                                         <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=~/Workdir/NEMO/supernemo/new_snware/bayeux/install <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_PREFIX_PATH=~/Workdir/NEMO/supernemo/new_snware/cadfael/install   <span class="org-sh-escaped-newline">\</span>
    -DBayeux_ENABLE_TESTING=ON                                                <span class="org-sh-escaped-newline">\</span>
    -DBayeux_WITH_GEANT4=ON                                                   <span class="org-sh-escaped-newline">\</span>
    -G Ninja -DCMAKE_MAKE_PROGRAM=$(pkgtools__get_binary_path ninja)          <span class="org-sh-escaped-newline">\</span>
    ~/Workdir/NEMO/supernemo/new_snware/bayeux/repo
</pre>
</div>
</div></li>
<li><a id="orgheadline42"></a>Test programs <code>[10/10]</code><br  /><div class="outline-text-5" id="text-orgheadline42">
<ul class="org-ul">
<li class="on"> datatools</li>
<li class="on"> brio</li>
<li class="on"> cuts</li>
<li class="on"> genbb_help</li>
<li class="on"> geomtools</li>
<li class="on"> genvtx</li>
<li class="on"> mygsl</li>
<li class="on"> materials</li>
<li class="on"> dpp</li>
<li class="on"> mctools</li>
</ul>
</div></li></ul>
</div>

<div id="outline-container-orgheadline44" class="outline-4">
<h4 id="orgheadline44"><span class="section-number-4">3.2.3</span> <span class="todo TODO">TODO</span> Falaise</h4>
</div>
</div>
</div>
<div id="outline-container-orgheadline60" class="outline-2">
<h2 id="orgheadline60"><span class="section-number-2">4</span> Install @ pc-server</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-orgheadline49" class="outline-3">
<h3 id="orgheadline49"><span class="section-number-3">4.1</span> Preamble</h3>
<div class="outline-text-3" id="text-4-1">
</div><div id="outline-container-orgheadline47" class="outline-4">
<h4 id="orgheadline47"><span class="section-number-4">4.1.1</span> Configuration of installation directory</h4>
<div class="outline-text-4" id="text-4-1-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">SW_WORK_DIR</span>=/data/workdir/nemo/supernemo/snware_test
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline48" class="outline-4">
<h4 id="orgheadline48"><span class="section-number-4">4.1.2</span> Machine configuration</h4>
<div class="outline-text-4" id="text-4-1-2">
<div class="org-src-container">

<pre class="src src-sh">uname -a
Linux pc-91089 3.11.0-12-generic <span class="org-comment-delimiter">#</span><span class="org-comment">19-Ubuntu SMP Wed Oct 9 16:12:00 UTC 2013 i686 i686 i686 GNU/Linux</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sh">g++ --version | head -1
g++ (Ubuntu/Linaro 4.8.1-10ubuntu8) 4.8.1
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sh">cmake --version
cmake version 2.8.11.2
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline54" class="outline-3">
<h3 id="orgheadline54"><span class="section-number-3">4.2</span> Cadfael</h3>
<div class="outline-text-3" id="text-4-2">
</div><div id="outline-container-orgheadline50" class="outline-4">
<h4 id="orgheadline50"><span class="section-number-4">4.2.1</span> Checking out</h4>
<div class="outline-text-4" id="text-4-2-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Cadfael/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline51" class="outline-4">
<h4 id="orgheadline51"><span class="section-number-4">4.2.2</span> Configuration</h4>
<div class="outline-text-4" id="text-4-2-2">
<p>
To setup <code>Cadfael</code>, first create the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/build
</pre>
</div>
<p>
Then simply do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                     <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/install <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_VERBOSE_BUILD=ON                            <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_STEP_TARGETS=ON                             <span class="org-sh-escaped-newline">\</span>
    -Dport/patchelf=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/gsl=ON                                         <span class="org-sh-escaped-newline">\</span>
    -Dport/clhep=ON                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/boost=ON                                       <span class="org-sh-escaped-newline">\</span>
    -Dport/boost+<span class="org-variable-name">regex</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/camp=ON                                        <span class="org-sh-escaped-newline">\</span>
    -Dport/xerces-c=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4=ON                                      <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">gdml</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">x11</span>=ON                                  <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">data</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/root=ON                                        <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">x11</span>=ON                                    <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">asimage</span>=ON                                <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">mathmore</span>=ON                               <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">opengl</span>=ON                                 <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/trunk
</pre>
</div>
<p>
then execute the <code>make</code> command
</p>
<div class="org-src-container">

<pre class="src src-sh">make
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline53" class="outline-4">
<h4 id="orgheadline53"><span class="section-number-4">4.2.3</span> Ports status <code>[7/8]</code></h4>
<div class="outline-text-4" id="text-4-2-3">
<ul class="org-ul">
<li class="on"> patchelf</li>
<li class="on"> GSL</li>
<li class="trans"> CLHEP</li>
<li class="on"> boost</li>
<li class="on"> camp</li>
<li class="on"> xerces-c</li>
<li class="on"> Geant4
<ul class="org-ul">
<li class="on"> <code>-Dport/geant4+gdml</code> will install Xerces-C</li>
<li class="on"> <code>-Dport/geant4+data</code></li>
</ul></li>
<li class="on"> ROOT
<ul class="org-ul">
<li class="on"> <code>-Dport/root+mathmore</code></li>
<li class="on"> <code>-Dport/root+opengl</code></li>
</ul></li>
</ul>
</div>

<ul class="org-ul"><li><a id="orgheadline52"></a>CLHEP test error<br  /><div class="outline-text-5" id="text-orgheadline52">
<p>
<b>Need to have a look into the logs.</b>
</p>
<div class="org-src-container">

<pre class="src src-sh">96% tests passed, 2 tests failed out of 47

Total Test time (real) =  18.38 sec

The following tests FAILED:
         24 - testInstanceRestore (Failed)
         29 - testBug58950 (Failed)
Errors while running CTest
make[4]: *** [test] Erreur 8
make[3]: *** [ports/clhep/clhep-prefix/src/clhep-stamp/clhep-test] Erreur 2
make[2]: *** [ports/clhep/CMakeFiles/clhep.dir/all] Erreur 2
make[1]: *** [ports/clhep/CMakeFiles/clhep.dir/rule] Erreur 2
make: *** [clhep] Erreur 2
</pre>
</div>

<p>
I had to disable the tests of CLHEP since one of them was failing and thus
stopping the compilation of other ports. To remove test, I have commented two
lines (line 38 &amp; 39) located in file
<code>$SW_WORK_DIR/Cadfael/trunk/ports/clhep/CMakeLists.txt</code>.
</p>
</div></li></ul>
</div>
</div>

<div id="outline-container-orgheadline59" class="outline-3">
<h3 id="orgheadline59"><span class="section-number-3">4.3</span> Bayeux</h3>
<div class="outline-text-3" id="text-4-3">
</div><div id="outline-container-orgheadline55" class="outline-4">
<h4 id="orgheadline55"><span class="section-number-4">4.3.1</span> Checking out</h4>
<div class="outline-text-4" id="text-4-3-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Bayeux/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline56" class="outline-4">
<h4 id="orgheadline56"><span class="section-number-4">4.3.2</span> Configuration</h4>
<div class="outline-text-4" id="text-4-3-2">
<p>
To setup <code>Bayeux</code>, first create the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir -p ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/build
</pre>
</div>
<p>
Then simply do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                                    <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/install <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_PREFIX_PATH=${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/install   <span class="org-sh-escaped-newline">\</span>
    -DBayeux_ENABLE_TESTING=ON                           <span class="org-sh-escaped-newline">\</span>
    -DBayeux_WITH_GEANT4=ON                              <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/trunk/
</pre>
</div>

<p>
To run the compilation process do
</p>
<div class="org-src-container">

<pre class="src src-sh">make install
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline58" class="outline-4">
<h4 id="orgheadline58"><span class="section-number-4">4.3.3</span> Test programs <code>[0/10]</code></h4>
<div class="outline-text-4" id="text-4-3-3">
<p>
Adding option <code>-DBayeux_ENABLE_TESTING=ON</code> to the <code>cmake</code> command will enable
the compilation of test programs. Then doing <code>make test</code> will launch each of
the <b>238 test programs</b> and it will eventually shows some broken tests.
</p>

<ul class="org-ul">
<li class="off"> datatools</li>
<li class="off"> brio</li>
<li class="off"> cuts</li>
<li class="off"> genbb_help</li>
<li class="off"> geomtools</li>
<li class="off"> genvtx</li>
<li class="off"> mygsl</li>
<li class="off"> materials</li>
<li class="off"> dpp</li>
<li class="off"> mctools (see below)</li>
</ul>
</div>

<ul class="org-ul"><li><a id="orgheadline57"></a><code>mctools</code> compilation error<br  /><div class="outline-text-5" id="text-orgheadline57">
<p>
Compilation of <code>mctools</code> component generates the following error
</p>
<div class="org-src-container">

<pre class="src src-sh">Building CXX object source/CMakeFiles/Bayeux_mctools_geant4.dir/bxmctools/src/g4/primary_generator.cc.o
/mnt/xwscratch/snailware/software/Bayeux/trunk/source/bxmctools/src/g4/primary_generator.cc: In member <span class="org-keyword">function</span> &#8216;void mctools::g4::primary_generator::_generate_event(G4Event*)&#8217;:
/mnt/xwscratch/snailware/software/Bayeux/trunk/source/bxmctools/src/g4/primary_generator.cc:365: error: ISO C++ says that these are ambiguous, even though the worst conversion for the first is better than the worst conversion for the second:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/basic_string.h:702: note: candidate 1: typename _Alloc::rebind&lt;_CharT&gt;::other::reference std::basic_string&lt;_CharT, _Traits, _Alloc&gt;::operator[](typename _Alloc::rebind&lt;_CharT&gt;::other::size_type) [with <span class="org-variable-name">_CharT</span> = char, <span class="org-variable-name">_Traits</span> = std::char_traits&lt;char&gt;, <span class="org-variable-name">_Alloc</span> = std::allocator&lt;char&gt;]
/mnt/xwscratch/snailware/software/Bayeux/trunk/source/bxmctools/src/g4/primary_generator.cc:365: note: candidate 2: operator[](const char*, int) &lt;built-in&gt;
make[2]: *** [source/CMakeFiles/Bayeux_mctools_geant4.dir/bxmctools/src/g4/primary_generator.cc.o] Error 1
make[1]: *** [source/CMakeFiles/Bayeux_mctools_geant4.dir/all] Error 2
make: *** [all] Error 2
</pre>
</div>
<p>
I guess this is related to <code>g++</code> version which is too old and does not handle
properly implicit cast. To overpass this problem, I changed line 365 of
<code>$SW_WORK_DIR/Bayeux/trunk/source/bxmctools/src/g4/primary_generator.cc</code> by
replacing the <code>G4string</code> type by a <code>std::string</code> type. Then I also changed the
declaration line 376 to something like
</p>
<div class="org-src-container">

<pre class="src src-c++"><span class="org-type">G4ParticleDefinition</span> * <span class="org-variable-name">g4_particle</span> = particle_table-&gt;FindParticle ((<span class="org-type">G4String</span>)g4_particle_name);
</pre>
</div>
</div></li></ul>
</div>
</div>
</div>
<div id="outline-container-orgheadline81" class="outline-2">
<h2 id="orgheadline81"><span class="section-number-2">5</span> Install @ VMWare</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-orgheadline65" class="outline-3">
<h3 id="orgheadline65"><span class="section-number-3">5.1</span> Preamble</h3>
<div class="outline-text-3" id="text-5-1">
</div><div id="outline-container-orgheadline61" class="outline-4">
<h4 id="orgheadline61"><span class="section-number-4">5.1.1</span> Connection to machine</h4>
<div class="outline-text-4" id="text-5-1-1">
<div class="org-src-container">

<pre class="src src-sh">ssh -p 2026 vmuser@134.158.89.155
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline62" class="outline-4">
<h4 id="orgheadline62"><span class="section-number-4">5.1.2</span> Machine configuration</h4>
<div class="outline-text-4" id="text-5-1-2">
<div class="org-src-container">

<pre class="src src-sh">uname -a
Linux xwlivecd_sl.localdomain 2.6.18-308.13.1.el5 <span class="org-comment-delimiter">#</span><span class="org-comment">1 SMP Tue Aug 21 18:49:37 EDT 2012 i686 i686 i386 GNU/Linux</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sh">g++ --version | head -1
g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-50)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline63" class="outline-4">
<h4 id="orgheadline63"><span class="section-number-4">5.1.3</span> Prerequisites</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
Since the machine embeds a SL5.5 linux distribution, some third-party software
components are missing. Especially, a decent version of <code>cmake</code> software has to
be installed (version from SL5.5 <code>yum</code> repositories are too deprecated). The
following table shows which external software have been (manually) installed
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 1:</span> <b>Third-party software components installed</b></caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Software</td>
<td class="org-right">Version</td>
</tr>

<tr>
<td class="org-left">cmake</td>
<td class="org-right">2.8.12.1</td>
</tr>
</tbody>
</table>

<p>
The needed softwares are installed in <code>/mnt/xwscratch/snailware/thirdparty</code>
directory. A <code>download</code> directory contains the tarballs and everything is
installed in <code>install</code> directory.
</p>

<p>
To use them, we should explicitly add the install path to the <code>PATH</code> environment
variable.
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">PATH</span>=/mnt/xwscratch/snailware/thirdparty/install/bin:$<span class="org-variable-name">PATH</span>
</pre>
</div>

<p>
I also had to install through <code>yum</code> package manager several packages listed in
the following table
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 2:</span> <b>Missing software components installed through <code>yum install</code> commmand</b></caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Package</td>
<td class="org-left">Required by</td>
</tr>

<tr>
<td class="org-left">patch</td>
<td class="org-left">patchelf</td>
</tr>

<tr>
<td class="org-left">expat-devel</td>
<td class="org-left">geant4</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgheadline64" class="outline-4">
<h4 id="orgheadline64"><span class="section-number-4">5.1.4</span> Configuration of installation directory</h4>
<div class="outline-text-4" id="text-5-1-4">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">SW_WORK_DIR</span>=/mnt/xwscratch/snailware/software
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline70" class="outline-3">
<h3 id="orgheadline70"><span class="section-number-3">5.2</span> Cadfael</h3>
<div class="outline-text-3" id="text-5-2">
</div><div id="outline-container-orgheadline66" class="outline-4">
<h4 id="orgheadline66"><span class="section-number-4">5.2.1</span> Checking out</h4>
<div class="outline-text-4" id="text-5-2-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Cadfael/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline67" class="outline-4">
<h4 id="orgheadline67"><span class="section-number-4">5.2.2</span> Configuration</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
To setup <code>Cadfael</code>, first create the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir -p ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/build
</pre>
</div>
<p>
Then simply do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                             <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/install <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_VERBOSE_BUILD=ON                    <span class="org-sh-escaped-newline">\</span>
    -DCADFAEL_STEP_TARGETS=ON                     <span class="org-sh-escaped-newline">\</span>
    -Dport/patchelf=ON                            <span class="org-sh-escaped-newline">\</span>
    -Dport/gsl=ON                                 <span class="org-sh-escaped-newline">\</span>
    -Dport/clhep=ON                               <span class="org-sh-escaped-newline">\</span>
    -Dport/boost=ON                               <span class="org-sh-escaped-newline">\</span>
    -Dport/boost+<span class="org-variable-name">regex</span>=ON                         <span class="org-sh-escaped-newline">\</span>
    -Dport/camp=ON                                <span class="org-sh-escaped-newline">\</span>
    -Dport/xerces-c=ON                            <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4=ON                              <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">gdml</span>=ON                         <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">x11</span>=ON                          <span class="org-sh-escaped-newline">\</span>
    -Dport/geant4+<span class="org-variable-name">data</span>=ON                         <span class="org-sh-escaped-newline">\</span>
    -Dport/root=ON                                <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">x11</span>=ON                            <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">asimage</span>=ON                        <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">mathmore</span>=ON                       <span class="org-sh-escaped-newline">\</span>
    -Dport/root+<span class="org-variable-name">opengl</span>=ON                         <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Cadfael/trunk/
</pre>
</div>
<p>
then execute the <code>make</code> command
</p>
<div class="org-src-container">

<pre class="src src-sh">make
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline69" class="outline-4">
<h4 id="orgheadline69"><span class="section-number-4">5.2.3</span> Ports status <code>[7/8]</code></h4>
<div class="outline-text-4" id="text-5-2-3">
<ul class="org-ul">
<li class="on"> patchelf</li>
<li class="on"> GSL</li>
<li class="off"> CLHEP (see below)</li>
<li class="on"> boost</li>
<li class="on"> camp</li>
<li class="on"> xerces-c</li>
<li class="on"> Geant4
<ul class="org-ul">
<li class="on"> <code>-Dport/geant4+gdml</code> will install Xerces-C</li>
<li class="on"> <code>-Dport/geant4+data</code></li>
</ul></li>
<li class="on"> ROOT
<ul class="org-ul">
<li class="on"> <code>-Dport/root+mathmore</code></li>
<li class="on"> <code>-Dport/root+opengl</code></li>
</ul></li>
</ul>
</div>

<ul class="org-ul"><li><a id="orgheadline68"></a>CLHEP test error<br  /><div class="outline-text-5" id="text-orgheadline68">
<p>
I had to disable the tests of CLHEP since one of them was failing and thus
stopping the compilation of other ports. To remove test, I have commented two
lines (line 38 &amp; 39) located in file
<code>$SW_WORK_DIR/Cadfael/trunk/ports/clhep/CMakeLists.txt</code>.
</p>
</div></li></ul>
</div>
</div>
<div id="outline-container-orgheadline75" class="outline-3">
<h3 id="orgheadline75"><span class="section-number-3">5.3</span> Bayeux</h3>
<div class="outline-text-3" id="text-5-3">
</div><div id="outline-container-orgheadline71" class="outline-4">
<h4 id="orgheadline71"><span class="section-number-4">5.3.1</span> Checking out</h4>
<div class="outline-text-4" id="text-5-3-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Bayeux/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline72" class="outline-4">
<h4 id="orgheadline72"><span class="section-number-4">5.3.2</span> Configuration</h4>
<div class="outline-text-4" id="text-5-3-2">
<p>
To setup <code>Bayeux</code>, first create the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir -p ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/build
</pre>
</div>
<p>
Then simply do
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                             <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/install <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_PREFIX_PATH=${<span class="org-variable-name">SW_WORK_DIR</span>}/install    <span class="org-sh-escaped-newline">\</span>
    -DBayeux_ENABLE_TESTING=ON                    <span class="org-sh-escaped-newline">\</span>
    -DBayeux_WITH_GEANT4=ON                       <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Bayeux/trunk/
</pre>
</div>

<p>
To run the compilation process do
</p>
<div class="org-src-container">

<pre class="src src-sh">make install
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline74" class="outline-4">
<h4 id="orgheadline74"><span class="section-number-4">5.3.3</span> Test programs <code>[9/10]</code></h4>
<div class="outline-text-4" id="text-5-3-3">
<p>
Adding option <code>-DBayeux_ENABLE_TESTING=ON</code> to the <code>cmake</code> command will enable
the compilation of test programs. Then doing <code>make test</code> will launch each of
the <b>238 test programs</b> and it will eventually shows some broken tests.
</p>

<ul class="org-ul">
<li class="on"> datatools</li>
<li class="on"> brio</li>
<li class="on"> cuts</li>
<li class="on"> genbb_help</li>
<li class="on"> geomtools</li>
<li class="on"> genvtx</li>
<li class="on"> mygsl</li>
<li class="on"> materials</li>
<li class="on"> dpp</li>
<li class="off"> mctools (see below)</li>
</ul>
</div>

<ul class="org-ul"><li><a id="orgheadline73"></a><code>mctools</code> compilation error<br  /><div class="outline-text-5" id="text-orgheadline73">
<p>
Compilation of <code>mctools</code> component generates the following error
</p>
<div class="org-src-container">

<pre class="src src-sh">Building CXX object source/CMakeFiles/Bayeux_mctools_geant4.dir/bxmctools/src/g4/primary_generator.cc.o
/mnt/xwscratch/snailware/software/Bayeux/trunk/source/bxmctools/src/g4/primary_generator.cc: In member <span class="org-keyword">function</span> &#8216;void mctools::g4::primary_generator::_generate_event(G4Event*)&#8217;:
/mnt/xwscratch/snailware/software/Bayeux/trunk/source/bxmctools/src/g4/primary_generator.cc:365: error: ISO C++ says that these are ambiguous, even though the worst conversion for the first is better than the worst conversion for the second:
/usr/lib/gcc/i386-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/basic_string.h:702: note: candidate 1: typename _Alloc::rebind&lt;_CharT&gt;::other::reference std::basic_string&lt;_CharT, _Traits, _Alloc&gt;::operator[](typename _Alloc::rebind&lt;_CharT&gt;::other::size_type) [with <span class="org-variable-name">_CharT</span> = char, <span class="org-variable-name">_Traits</span> = std::char_traits&lt;char&gt;, <span class="org-variable-name">_Alloc</span> = std::allocator&lt;char&gt;]
/mnt/xwscratch/snailware/software/Bayeux/trunk/source/bxmctools/src/g4/primary_generator.cc:365: note: candidate 2: operator[](const char*, int) &lt;built-in&gt;
make[2]: *** [source/CMakeFiles/Bayeux_mctools_geant4.dir/bxmctools/src/g4/primary_generator.cc.o] Error 1
make[1]: *** [source/CMakeFiles/Bayeux_mctools_geant4.dir/all] Error 2
make: *** [all] Error 2
</pre>
</div>
<p>
I guess this is related to <code>g++</code> version which is too old and does not handle
properly implicit cast. To overpass this problem, I changed line 365 of
<code>$SW_WORK_DIR/Bayeux/trunk/source/bxmctools/src/g4/primary_generator.cc</code> by
replacing the <code>G4string</code> type by a <code>std::string</code> type. Then I also changed the
declaration line 376 to something like
</p>
<div class="org-src-container">

<pre class="src src-c++"><span class="org-type">G4ParticleDefinition</span> * <span class="org-variable-name">g4_particle</span> = particle_table-&gt;FindParticle ((<span class="org-type">G4String</span>)g4_particle_name);
</pre>
</div>
</div></li></ul>
</div>
</div>
<div id="outline-container-orgheadline79" class="outline-3">
<h3 id="orgheadline79"><span class="section-number-3">5.4</span> Falaise</h3>
<div class="outline-text-3" id="text-5-4">
</div><div id="outline-container-orgheadline76" class="outline-4">
<h4 id="orgheadline76"><span class="section-number-4">5.4.1</span> Checking out</h4>
<div class="outline-text-4" id="text-5-4-1">
<div class="org-src-container">

<pre class="src src-sh">svn co https://nemo.lpc-caen.in2p3.fr/svn/Falaise/trunk <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/trunk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline77" class="outline-4">
<h4 id="orgheadline77"><span class="section-number-4">5.4.2</span> Configuration</h4>
<div class="outline-text-4" id="text-5-4-2">
<p>
To setup <code>Falaise</code> with an already version of <code>Bayeux</code> installed, first create
the following directory
</p>
<div class="org-src-container">

<pre class="src src-sh">mkdir -p ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/build &amp;&amp; <span class="org-builtin">cd</span> ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/build
</pre>
</div>
<p>
Then configure <code>Falaise</code>
</p>
<div class="org-src-container">

<pre class="src src-sh">cmake                                             <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_INSTALL_PREFIX=${<span class="org-variable-name">SW_WORK_DIR</span>}/install <span class="org-sh-escaped-newline">\</span>
    -DCMAKE_PREFIX_PATH=${<span class="org-variable-name">SW_WORK_DIR</span>}/install    <span class="org-sh-escaped-newline">\</span>
    -DFalaise_ENABLE_TESTING=ON                   <span class="org-sh-escaped-newline">\</span>
    -DFalaise_BUILD_DOCS=OFF                      <span class="org-sh-escaped-newline">\</span>
    -DFalaise_USE_SYSTEM_BAYEUX=ON                <span class="org-sh-escaped-newline">\</span>
    ${<span class="org-variable-name">SW_WORK_DIR</span>}/Falaise/trunk
</pre>
</div>

<p>
To run the compilation process do
</p>
<div class="org-src-container">

<pre class="src src-sh">make install
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline78" class="outline-4">
<h4 id="orgheadline78"><span class="section-number-4">5.4.3</span> Basic tests</h4>
<div class="outline-text-4" id="text-5-4-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">PATH</span>=${<span class="org-variable-name">SW_WORK_DIR</span>}/install/bin:$<span class="org-variable-name">PATH</span>
flsimulate -n 10 -o /tmp/${<span class="org-variable-name">USER</span>}/snemo_tc_muons_roof.xml
flreconstruct -i /tmp/${<span class="org-variable-name">USER</span>}/snemo_tc_muons_roof.xml
</pre>
</div>

<p>
Tests successfully passed.
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline80" class="outline-3">
<h3 id="orgheadline80"><span class="section-number-3">5.5</span> Final tests</h3>
<div class="outline-text-3" id="text-5-5">
<p>
Every binaries have been placed within
<code>/mnt/xwscratch/snailware/software/install</code> directory. It means that all the
relevant parts <i>i.e.</i> library, configuration files, executables of the software
may be found here. To make use of the useful binaries for SuperNEMO simulation
and reconstruction, one has to export the <code>bin</code> directory to the <code>PATH</code>
environment variable:
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">PATH</span>=/mnt/xwscratch/snailware/software/install/bin:$<span class="org-variable-name">PATH</span>
</pre>
</div>
<p>
Then, the <code>flsimulate</code> program and the <code>flreconstruct</code> program can be execute
from everywhere.
</p>

<p>
To test each of them, you can do
</p>
<div class="org-src-container">

<pre class="src src-sh">flsimulate -n 10 -o /tmp/${<span class="org-variable-name">USER</span>}/snemo_output.xml
</pre>
</div>
<p>
This will generate 10 events and store the result of the simulation in the
<code>/tmp/${USER}/snemo_output.xml</code> file. To perform reconstruction of the previous
set of simulated data, you can do
</p>
<div class="org-src-container">

<pre class="src src-sh">flreconstruct -i /tmp/${<span class="org-variable-name">USER</span>}/snemo_output.xml
</pre>
</div>
<p>
This will dump some information related to simulated data. Making both of them
working means that everything has been installed properly.
</p>

<p>
<b>Remark:</b>
Since binaries use <code>rpath</code> technique to embeds library path<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>, binaries may
be moved to other place without breaking link paths. It seems to work with
Bayeux components but for the 2 interesting Falaise binaries, namely
<code>flsimulate</code> and <code>flreconstruct</code>, it seems to have some bad hard-coded path
within these binaries. For example, if I moved the former binaries to the
<code>$HOME</code> directory, then running <code>$HOME/flsimulate --help</code> command gives the
following error
 <div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara"> rpath is a term in programming which refers to a run-time search path hard-coded in an executable file or library, used during dynamic linking to find the libraries the executable or library requires. </p></div><br/></div>
</p>
<div class="org-src-container">

<pre class="src src-sh">terminate called after throwing an instance of <span class="org-string">'boost::filesystem::filesystem_error'</span>
  what():  boost::filesystem::canonical: No such file or directory: <span class="org-string">"/home/vmuser/../share/Falaise-1.0.0"</span>
Aborted
</pre>
</div>
<p>
Clearly, there is a reference to a relative path from where the executable is
used.
</p>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes"> </h2>
<div id="text-footnotes">



</div>
</div></div>
<div id="postamble" class="status">
File under <i class="fa fa-github-alt"></i> version control - commit <a href="https://github.com/xgarrido/org-notes/commit/a051d1e1c02647f7620ab959f1b3e22c1adce872">a051d1e</a> - 2015-10-17
</div>
</body>
</html>
